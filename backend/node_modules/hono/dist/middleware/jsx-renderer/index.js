// src/middleware/jsx-renderer/index.ts
import { jsx, createContext, useContext } from "../../jsx/index.js";
var RequestContext = createContext(null);
var createRenderer = (c, component) => (children, props) => c.html(
  jsx(
    RequestContext.Provider,
    { value: c },
    component ? component({ children, ...props || {} }) : children
  )
);
var jsxRenderer = (component) => (c, next) => {
  c.setRenderer(createRenderer(c, component));
  return next();
};
var useRequestContext = () => {
  const c = useContext(RequestContext);
  if (!c) {
    throw new Error("RequestContext is not provided.");
  }
  return c;
};
export {
  RequestContext,
  jsxRenderer,
  useRequestContext
};
